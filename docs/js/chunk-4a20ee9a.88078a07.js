(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a20ee9a"],{"4a50":function(e,t,n){"use strict";n("88480")},88480:function(e,t,n){},9330:function(e,t){e.exports='<h2 id="组件说明">组件说明</h2> <p><code>scroll-table</code>本组件是为了实现不分页渲染大量数据的需求，基于蚂蚁金服的<code>a-table</code>组件实现。</p> <h2 id="属性-api">属性 API</h2> <table> <thead> <tr> <th align="left">参数</th> <th align="left">说明</th> <th align="center">类型</th> <th align="center">可选值</th> <th align="left">默认值</th> </tr> </thead> <tbody><tr> <td align="left">rowKey</td> <td align="left">主键，用做vue的组件key</td> <td align="center">String</td> <td align="center">-</td> <td align="left">&#39;id&#39;</td> </tr> <tr> <td align="left">columns</td> <td align="left">表格的表头数据</td> <td align="center">Array</td> <td align="center">-</td> <td align="left">[]</td> </tr> <tr> <td align="left">showChecked</td> <td align="left">是否显示选择框，用于对表格数据进行选中操作</td> <td align="center">Boolean</td> <td align="center">true/false</td> <td align="left">true</td> </tr> <tr> <td align="left">defaultCheckedKeys</td> <td align="left">表格的默认选中数据的id组件的数组(根据前面的rowKey设置的属性筛选)</td> <td align="center">Array</td> <td align="center">-</td> <td align="left">[]</td> </tr> <tr> <td align="left">disbleCheckedFunc</td> <td align="left">复选框的禁用方法，用以对特殊的数据进行禁用选中功能</td> <td align="center">[Function, Boolean]</td> <td align="center">-</td> <td align="left">false</td> </tr> <tr> <td align="left">scroll</td> <td align="left">表格的滚动区域</td> <td align="center">Object</td> <td align="center">-</td> <td align="left">{}</td> </tr> <tr> <td align="left">tableDatas</td> <td align="left">表格的所有数据</td> <td align="center">Array</td> <td align="center">-</td> <td align="left">[]</td> </tr> <tr> <td align="left">showNum</td> <td align="left">显示的数据条数，该属性决定页面内渲染的DOM数量</td> <td align="center">Number</td> <td align="center">-</td> <td align="left">20</td> </tr> </tbody></table> <h2 id="事件（xxxxfunction）">事件（@xxxx=&quot;function&quot;）</h2> <table> <thead> <tr> <th align="left">事件名称</th> <th align="left">说明</th> <th align="left">回调参数</th> </tr> </thead> <tbody><tr> <td align="left">handleTableCheck</td> <td align="left">表格内选中事件的回调，用以操作选中数据</td> <td align="left">function(selectedRowKeys,selectedRow)</td> </tr> <tr> <td align="left">handleCheckChangeAll</td> <td align="left">表格头的全选和反选事件</td> <td align="left">function(checked,selectedRowKeys,selectedRow)</td> </tr> </tbody></table> <h2 id="组件使用代码示例">组件使用代码示例</h2> <pre><code class="language-javascript">&lt;template&gt;\n  &lt;uev-docs title=&quot;表格不分页渲染组件&quot; :markHtml=&quot;mark&quot;&gt;\n    &lt;div class=&quot;docs-wrap&quot;&gt;\n      &lt;!-- 示例代码开始 --&gt;\n      &lt;scroll-table\n        ref=&quot;scrollTable&quot;\n        rowKey=&quot;id&quot;\n        :columns=&quot;tableColumns&quot;\n        :showChecked=&quot;true&quot;\n        :defaultCheckedKeys=&quot;defaultCheckedKeys&quot;\n        :scroll=&quot;{\n          x: 1000,\n          y: 400\n        }&quot;\n        :disbleCheckedFunc=&quot;isTableItemDisabled&quot;\n        :tableDatas=&quot;tableDatas&quot;\n        @handleTableCheck=&quot;handleTableCheck&quot;\n        @handleCheckChangeAll=&quot;handleCheckChangeAll&quot;\n      /&gt;\n      &lt;!-- 示例代码结束 --&gt;\n    &lt;/div&gt;\n  &lt;/uev-docs&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ScrollTable from &#39;@/components/func-com/ScrollTable.vue&#39;\nimport mark from &#39;./README.md&#39;\n\nexport default {\n  name: &#39;ScrollTableDocs&#39;,\n  components: {\n    ScrollTable\n  },\n  data() {\n    return {\n      mark: mark,\n      tableColumns: [\n        {\n          title: &#39;房屋号&#39;,\n          key: &#39;fwh&#39;,\n          dataIndex: &#39;fwh&#39;,\n          width: 100\n        },\n        {\n          title: &#39;功能&#39;,\n          valueKey: &#39;fwgn&#39;,\n          dataIndex: &#39;fwgn&#39;,\n          key: &#39;fwgn&#39;,\n          width: 100\n        },\n        {\n          title: &#39;户型&#39;,\n          valueKey: &#39;fwhx&#39;,\n          dataIndex: &#39;fwhx&#39;,\n          key: &#39;fwhx&#39;,\n          width: 100\n        },\n        {\n          title: &#39;房屋朝向&#39;,\n          dataIndex: &#39;fwcx&#39;,\n          key: &#39;fwcx&#39;,\n          width: 100\n        },\n        {\n          title: &#39;房屋状态&#39;,\n          dataIndex: &#39;fwzt&#39;,\n          key: &#39;fwzt&#39;,\n          width: 100\n        },\n        {\n          title: &#39;共有产权&#39;,\n          dataIndex: &#39;gycq&#39;,\n          key: &#39;gycq&#39;,\n          width: 100\n        },\n        {\n          title: &#39;是否抵押&#39;,\n          dataIndex: &#39;sfdy&#39;,\n          key: &#39;sfdy&#39;,\n          width: 100\n        },\n        {\n          title: &#39;预售总面积(m²)&#39;,\n          valueKey: &#39;zjzmj&#39;,\n          dataIndex: &#39;zjzmj&#39;,\n          key: &#39;zjzmj&#39;,\n          fixed: &#39;right&#39;,\n          width: 140\n        },\n        {\n          title: &#39;套内面积(m²)&#39;,\n          valueKey: &#39;tnmj&#39;,\n          dataIndex: &#39;tnmj&#39;,\n          key: &#39;tnmj&#39;,\n          fixed: &#39;right&#39;,\n          width: 120\n        },\n        {\n          title: &#39;公摊面积(m²)&#39;,\n          valueKey: &#39;gtmj&#39;,\n          dataIndex: &#39;gtmj&#39;,\n          key: &#39;gtmj&#39;,\n          fixed: &#39;right&#39;,\n          width: 120\n        }\n      ],\n      defaultCheckedKeys: [1, 2, 3],\n      tableDatas: []\n    }\n  },\n  mounted() {\n    this.initHouseData()\n  },\n  methods: {\n    initHouseData() {\n      this.tableDatas = []\n      const gnArr = [&#39;车位&#39;, &#39;住宅&#39;, &#39;别墅&#39;, &#39;商品房&#39;, &#39;自建房&#39;]\n      const hxArr = [&#39;一房一厅&#39;, &#39;两房一厅&#39;, &#39;三房一厅&#39;, &#39;四房一厅&#39;, &#39;三房两厅&#39;, &#39;四房两厅&#39;]\n      const cxArr = [&#39;南&#39;, &#39;北&#39;, &#39;东&#39;, &#39;西&#39;, &#39;西南&#39;, &#39;东南&#39;, &#39;西北&#39;, &#39;东北&#39;]\n      const ztArr = [&#39;正常&#39;, &#39;查封&#39;]\n      for (let i = 0; i &lt; 10000; i++) {\n        const data = {\n          id: i,\n          fwh: Math.floor((i / 10) + 1) + &#39;0&#39; + parseInt(Math.random() * 9 + 1),\n          fwgn: gnArr[parseInt(i / gnArr.length) % gnArr.length],\n          fwhx: hxArr[parseInt(i / hxArr.length) % hxArr.length],\n          fwcx: cxArr[parseInt(i / cxArr.length) % cxArr.length],\n          fwzt: ztArr[parseInt(i / ztArr.length) % ztArr.length],\n          gycq: i % 2 === 0 ? &#39;是&#39; : &#39;否&#39;,\n          sfdy: i % 2 === 0 ? &#39;是&#39; : &#39;否&#39;,\n          zjzmj: (Math.random() * 100).toFixed(2),\n          tnmj: (Math.random() * 100).toFixed(2),\n          gtmj: (Math.random() * 100).toFixed(2)\n        }\n        this.tableDatas.push(data)\n      }\n      // 调用组件内的初始化方法\n      this.$refs.scrollTable.initScrollDOM()\n    },\n    // 判断房屋是否可选\n    isTableItemDisabled(record) {\n      const flag = record.id % 4 === 0\n      return flag\n    },\n    // 表格单个元素选中\n    handleTableCheck(selectedRowKeys, selectedRows) {\n      console.log(&#39;选中的房屋id:&#39;, selectedRowKeys, &#39;选中的房屋数据:&#39;, selectedRows)\n    },\n    // 表格全选\n    handleCheckChangeAll(checked, selectedRowKeys, selectedRows) {\n      console.log(&#39;全选房屋&#39;, checked)\n      console.log(&#39;选中的房屋id:&#39;, selectedRowKeys, &#39;选中的房屋数据:&#39;, selectedRows)\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot; scoped&gt;\n.demo {\n    display: inline-block;\n    margin-right: 25px;\n}\n&lt;/style&gt;</code></pre> '},dde7:function(e,t,n){"use strict";n.r(t);n("b680");var l=n("2909"),a=(n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("06c5"));function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(a.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var l=0,d=function(){};return{s:d,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:d}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw r}}}}n("a9e3"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("a630"),n("159b"),n("6062"),n("99af"),n("a434");var r={name:"ScrollTable",extends:n("0020").a,props:{rowKey:{type:[String,Function],default:function(){return"id"}},columns:{type:Array,default:function(){return[]}},showChecked:{type:Boolean,default:function(){return!0}},defaultCheckedKeys:{type:Array,default:function(){return[]}},disbleCheckedFunc:{type:[Function,Boolean],default:function(){return!1}},scroll:{type:Object,default:function(){return{}}},tableDatas:{type:Array,default:function(){return[]}},showNum:{type:Number,default:function(){return 20}}},data:function(){return{currentStartIndex:0,currentEndIndex:this.showNum,selectedRowKeys:this.defaultCheckedKeys,disabledAll:!1,canChooseLength:0,showRowNum:0,rowHeight:40,selectTbody:"",createElementTR:"",createElementTRHeight:0,spillDataNum:20,dataSize:0,fixedTbodyRight:"",createElementTRII:""}},computed:{filteredData:function(){var e=this;return this.tableDatas.filter((function(t,n){return!(n<e.currentStartIndex)&&!(n>e.currentEndIndex)}))},tableColumns:function(){var e=this.columns;return this.showChecked?(e.unshift({width:70,scopedSlots:{title:"customTitleCheck",customRender:"customTableCheck"}}),e):e},slots:function(){var e,t=[],n=d(this.columns);try{for(n.s();!(e=n.n()).done;){var l=e.value,a={};for(var r in l)"scopedSlots"!==r&&(a[r]=l[r]);l.scopedSlots&&l.scopedSlots.customRender&&t.push({name:l.scopedSlots.customRender,conf:a}),l.scopedSlots&&l.scopedSlots.title&&t.push({name:l.scopedSlots.title,conf:a}),l.children&&function(){var e=l.children;e.map((function(n){n.scopedSlots&&(e.valueKey=n.key,t.push({name:"".concat(n.scopedSlots.customRender),conf:n}))}))}()}}catch(e){n.e(e)}finally{n.f()}return t},selectedRow:function(){var e,t=[],n=this.selectedRowKeys.length,l=d(this.tableDatas);try{for(l.s();!(e=l.n()).done;){var a=e.value;if(this.selectedRowKeys.includes(a[this.rowKey])&&t.push(a),t.length>=n)break}}catch(e){l.e(e)}finally{l.f()}return t},indeterminateAll:function(){var e=this.selectedRowKeys.length;return e>0&&e<this.canChooseLength},checkedAll:function(){return this.canChooseLength>0&&this.canChooseLength===this.selectedRowKeys.length}},watch:{tableDatas:function(e){var t=this;if(this.canChooseLength=0,this.disabledAll=!0,this.selectTbody)for(var n=Array.from(this.selectTbody.querySelectorAll(".new-tr")),l=0;l<n.length;l++)this.selectTbody.removeChild(n[l]);if(this.fixedTbodyRight)for(var a=Array.from(this.fixedTbodyRight.querySelectorAll(".new-tr")),d=0;d<a.length;d++)this.fixedTbodyRight.removeChild(a[d]);this.tableDatas.forEach((function(e){t.handleCheckDisabled(e)||(t.canChooseLength++,t.disabledAll=!1)}))},defaultCheckedKeys:function(e){this.selectedRowKeys=Array.from(new Set([].concat(Object(l.a)(e),Object(l.a)(this.selectedRowKeys))))}},methods:{initScrollDOM:function(){var e=this;this.$nextTick((function(){e.tableRef=e.$refs.antTableRef;var t=e.tableRef.$el,n=t.querySelector(".ant-table-body");e.selectTbody=n.querySelector("table tbody");var l=n.querySelector("table tr");if(e.dataSize=e.tableDatas.length,e.rowHeight=l.clientHeight,e.showRowNum=Math.round(n.clientHeight/e.rowHeight),e.spillDataNum=e.showNum-e.showRowNum,!(e.dataSize<=e.showRowNum)){if(e.createElementTR=document.createElement("tr"),e.createElementTR.classList.add("new-tr"),e.createElementTRHeight=(e.dataSize-e.showRowNum-e.spillDataNum)*e.rowHeight,e.createElementTR.setAttribute("style","height: ".concat(e.createElementTRHeight,"px;")),e.selectTbody.append(e.createElementTR),t.querySelector(".ant-table-fixed-right")){e.createElementTRII=e.createElementTR.cloneNode(!0);var a=t.querySelector(".ant-table-fixed-right").querySelector(".ant-table-body-outer").querySelector(".ant-table-body-inner");e.fixedTbodyRight=a.querySelector("table tbody"),e.fixedTbodyRight.append(e.createElementTRII)}n.addEventListener("scroll",(function(t){if("ant-table-body"===t.target.className){var n=t.target.scrollTop-e.spillDataNum*e.rowHeight,l=Math.round(n/e.rowHeight),a=e.dataSize-e.spillDataNum-e.showRowNum;l>a&&(l=a),l<0&&(l=0,n=0),e.selectTbody.setAttribute("style","transform: translateY(".concat(n,"px)")),e.createElementTR.setAttribute("style","height: ".concat(e.createElementTRHeight-n>0?e.createElementTRHeight-n:0,"px;")),e.fixedTbodyRight&&e.createElementTRII&&(e.fixedTbodyRight.setAttribute("style","transform:translateY(".concat(n,"px)")),e.createElementTRII.setAttribute("style","height: ".concat(e.createElementTRHeight-n>0?e.createElementTRHeight-n:0,"px"))),e.currentStartIndex=l,e.currentEndIndex=l+e.showRowNum+e.spillDataNum}}))}}))},handleCheckDisabled:function(e){return this.disbleCheckedFunc(e)},handleCheckChange:function(e,t){if(e.target.checked){if(this.selectedRowKeys.includes(t[this.rowKey]))return;this.selectedRowKeys.push(t[this.rowKey]),t.checked=!0}else{var n=this.selectedRowKeys.indexOf(t[this.rowKey]);this.selectedRowKeys.splice(n,1),t.checked=!1}this.$emit("handleTableCheck",this.selectedRowKeys,this.selectedRow)},handleCheckChangeAll:function(e){var t=e.target.checked;if(t){var n,l=d(this.tableDatas);try{for(l.s();!(n=l.n()).done;){var a=n.value;this.handleCheckDisabled(a)||this.selectedRowKeys.includes(a[this.rowKey])||this.selectedRowKeys.push(a[this.rowKey])}}catch(e){l.e(e)}finally{l.f()}}else this.selectedRowKeys=[];this.$emit("handleCheckChangeAll",t,this.selectedRowKeys,this.selectedRow)}}},i=n("2877"),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tableWrap"},[n("a-table",{ref:"antTableRef",attrs:{rowKey:e.rowKey,dataSource:e.filteredData,columns:e.tableColumns,pagination:!1,scroll:e.scroll},scopedSlots:e._u([e._l(e.slots,(function(t){return{key:t.name,fn:function(l,a,d,r){return["customTitleCheck"===t.name?[n("a-checkbox",{key:t.name,attrs:{disabled:e.disabledAll,checked:e.checkedAll,indeterminate:e.indeterminateAll},on:{change:e.handleCheckChangeAll}})]:"customTableCheck"===t.name?[n("a-checkbox",{key:t.name,attrs:{checked:e.selectedRowKeys.includes(a[e.rowKey]),disabled:e.handleCheckDisabled(a)},on:{change:function(t){return e.handleCheckChange(t,a)}}})]:e._t(t.name,null,null,{text:l,record:a,index:d,column:r})]}}}))],null,!0)})],1)}),[],!1,null,null,null).exports,c=n("9330"),s=n.n(c),h={name:"ScrollTableDocs",components:{ScrollTable:o},data:function(){return{mark:s.a,tableColumns:[{title:"房屋号",key:"fwh",dataIndex:"fwh",width:100},{title:"功能",valueKey:"fwgn",dataIndex:"fwgn",key:"fwgn",width:100},{title:"户型",valueKey:"fwhx",dataIndex:"fwhx",key:"fwhx",width:100},{title:"房屋朝向",dataIndex:"fwcx",key:"fwcx",width:100},{title:"房屋状态",dataIndex:"fwzt",key:"fwzt",width:100},{title:"共有产权",dataIndex:"gycq",key:"gycq",width:100},{title:"是否抵押",dataIndex:"sfdy",key:"sfdy",width:100},{title:"预售总面积(m²)",valueKey:"zjzmj",dataIndex:"zjzmj",key:"zjzmj",fixed:"right",width:140},{title:"套内面积(m²)",valueKey:"tnmj",dataIndex:"tnmj",key:"tnmj",fixed:"right",width:120},{title:"公摊面积(m²)",valueKey:"gtmj",dataIndex:"gtmj",key:"gtmj",fixed:"right",width:120}],defaultCheckedKeys:[1,2,3],tableDatas:[]}},mounted:function(){this.initHouseData()},methods:{initHouseData:function(){this.tableDatas=[];for(var e=["车位","住宅","别墅","商品房","自建房"],t=["一房一厅","两房一厅","三房一厅","四房一厅","三房两厅","四房两厅"],n=["南","北","东","西","西南","东南","西北","东北"],l=["正常","查封"],a=0;a<1e4;a++){var d={id:a,fwh:a+1,fwgn:e[parseInt(a/e.length)%e.length],fwhx:t[parseInt(a/t.length)%t.length],fwcx:n[parseInt(a/n.length)%n.length],fwzt:l[parseInt(a/l.length)%l.length],gycq:a%2==0?"是":"否",sfdy:a%2==0?"是":"否",zjzmj:(100*Math.random()).toFixed(2),tnmj:(100*Math.random()).toFixed(2),gtmj:(100*Math.random()).toFixed(2)};this.tableDatas.push(d)}this.$refs.scrollTable.initScrollDOM()},isTableItemDisabled:function(e){return e.id%4==0},handleTableCheck:function(e,t){},handleCheckChangeAll:function(e,t,n){}}},u=(n("4a50"),Object(i.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uev-docs",{attrs:{title:"表格不分页渲染大量数据组件",markHtml:e.mark}},[n("div",{staticClass:"docs-wrap"},[n("scroll-table",{ref:"scrollTable",attrs:{rowKey:"id",columns:e.tableColumns,showChecked:!0,defaultCheckedKeys:e.defaultCheckedKeys,scroll:{x:1e3,y:400},disbleCheckedFunc:e.isTableItemDisabled,tableDatas:e.tableDatas},on:{handleTableCheck:e.handleTableCheck,handleCheckChangeAll:e.handleCheckChangeAll}})],1)])}),[],!1,null,"0ab87116",null));t.default=u.exports}}]);